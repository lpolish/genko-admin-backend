# Genkō Healthcare Admin Backend - Database Seeding

## Initial Setup

Before running the application, you need to seed the database with the initial super admin user.

### Prerequisites

1. **Supabase Project**: Set up your Supabase project and get the following credentials:
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `SUPABASE_SERVICE_ROLE_KEY`

2. **Environment Variables**: Create a `.env.local` file in the project root with:

```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# Optional: Customize admin user credentials
ADMIN_EMAIL=admin@genkohealth.com
ADMIN_PASSWORD=your_secure_password
```

### Seeding the Admin User

Run the following command to create the initial super admin user:

```bash
pnpm run seed-admin
```

This script will:
1. Create a user in Supabase Auth
2. Create the corresponding user record in the database with `super_admin` role
3. Display the login credentials for the admin user

### Default Admin Credentials

If you don't set `ADMIN_EMAIL` and `ADMIN_PASSWORD` in your environment variables, the script will use:
- **Email**: `admin@genkohealth.com`
- **Password**: A randomly generated secure 16-character password

⚠️ **Important**: Save the generated credentials securely! This is the only super admin account with full platform access.

### What the Super Admin Can Do

The super admin user has access to:
- All platform features and settings
- Organization management (create, view, modify all organizations)
- User management across all organizations
- System analytics and reporting
- Billing and subscription management
- Security and audit logs

### Running the Application

After seeding the admin user:

1. Start the development server:
   ```bash
   pnpm run dev
   ```

2. Navigate to `http://localhost:3000/login`

3. Log in with the admin credentials generated by the seed script

4. Access the admin dashboard at `http://localhost:3000/dashboard`

### Troubleshooting

- **Environment Variables Missing**: Make sure `.env.local` exists with the required Supabase credentials
- **User Already Exists**: The script handles existing users gracefully and will update their role if needed
- **Database Connection Issues**: Verify your Supabase URL and service role key are correct

### Security Notes

- The service role key has full access to your Supabase project - keep it secure
- The seed script only creates one super admin user
- Additional admin users should be created through the admin interface after initial setup